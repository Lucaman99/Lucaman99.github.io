#+TITLE:Introduction to derived functors, triangulated categories, and derived categories
#+DESCRIPTION:Directory
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="https://gongzhitaao.org/orgcss/org.css"/>
#+HTML_HEAD: <style> body {font-size:15px;background-color:#FDF7D6} a {color:blue;} </style>

/Originally posted:/

-------------

* Introduction

The goal of this post is to explain the general construction of derived functors and derived categories, then use these ideas to introduce the general
notion of sheaf cohomology and hypercohomology. This post is going to be my most "encyclopedic" to date: we will cover a lot of expository theory to
build up to our main results, some of which is a bit boring, but I'm hoping that this will serve as a great, thorough reference for myself and others.

* Category theory basics

In this section, I'll go over a few basic ideas in category theory.

*Definition 2.1* (Initial and final objects). Let $\mathcal{C}$ be a category, an object $I$ in $\mathcal{C}$ is said to be initial if for any other object $X$,
there is a unique morphism $I \to X$. An object $T$ is terminal if for any $X$, there is a unique morphism $X \to T$.
An object is said to be a zero object (denoted $0$) if it is both initial and terminal.

*Remark 2.1.* It is easy to see that initial and final objects (if they exists) are unique up to unique isomorphism.

*Definition 2.2* (Comma category). Let $F : \mathcal{C} \rightarrow \mathcal{D}$ be a functor, let $X$ be an object of $D$. The comma category $(X \downarrow F)$ is defined as follows:

- The objects are pairs $(C, f : x \rightarrow F(C))$ for objects $C \in \text{Obj}(\mathcal{C})$.
- The morphisms between $(C, f)$ and $(C', f' : X \rightarrow F(C'))$ are morphisms $h : C \rightarrow C'$ in $\mathcal{C}$ such that $F(h) \circ f = f'$.
  
It is very easy to verify that we have defined a valid category. We can also define another type of comma category, $(F \downarrow X)$, where we look at objects of the form $(C, f : F(C) \rightarrow x)$,
and define the morphisms in the obvious way.

*Example 2.1.* The category of pointed topological spaces is precisely $(\cdot \downarrow \textbf{Top})$.

*Definition 2.3* (Universal morphism). A universal morphism is an initial object in $(X \downarrow F)$, a particular comma category, or a terminal object in $(F \downarrow X)$. Intuitively, a
universal morphism encodes a property which characterizes
some object up to isomorphism. We can unravel the definition of a universal morphism to better conceptualize it.
In particular, a universal morphism (in $(X \downarrow F)$) is a pair $(C, f : X \rightarrow F(C))$ such that for any other pair $(C', f' : X \rightarrow F(C'))$,
there is a unique arrow $h : C \rightarrow C'$ such that the following diagram commutes:

#+ATTR_HTML: :width 250px
[[./assets/uni_prop.png]]

*Corollary 2.1.* A universal morphism is unique up to unique isomorphism in the comma category: this follows immediately from the fact that initial and terminal objects are unique up
to unique isomorphism.

*Example 2.2* (Tensor algebra). The tensor algebra of a vector space is a great example of an object characterized via a universal property. In particular, given some vector space $V$ over $k$, the property
which characterizes the tensor algebra $T(V)$ is that any linear map $V \rightarrow A$ of $V$ to a $k$ -algebra extends uniquely to an algebra homomorphism from $T(V)$ to $A$.
Let $\text{For} : \textbf{Alg}_k \rightarrow \textbf{Vect}_k$ be the forgetful functor which sends a $k$ -algebra to its underlying vector space. We take $F$ to be $\text{For}$, and
we take $X = V$. Our desired object is an initial object $(T(V), f : V \rightarrow \text{For}(T(V)))$ in the comma category, which is to say that for any $A \in \textbf{Alg}_k$ and
linear map $f' : V \rightarrow \text{For}(A)$, there must be a unique algebra homomorphism $g : T(V) \rightarrow A$ such that $\text{For}(g) \circ f = f'$.

*Remark 2.2.* A word of caution: this formulation of a universal morphism can fail to nicely capture many instances where a "universal property" may describe a particular object.
A good example is the tensor product. Technically, one can formulate a definition of the tensor product of two vector spaces, $V \otimes W$, via the language of universal morphisms (see [[https://ncatlab.org/nlab/show/tensor+product][nLab]]),
but in practice, it is better to just say that $V \otimes W$ is an object of $\textbf{Vect}_k$ and a bilinear map $j : V \times W \rightarrow V \otimes W$ such that
for any bilinear map $f : V \times W \rightarrow Z$, there is a unique morphism $h : V \otimes W \rightarrow Z$ such that $h \circ j = f$. The reason why we cannot use a universal morphism
naively in this case is because of the /bilinear/ attribute of the maps $j$ and $f$ (we can't specify this particular attribute as native to the category in which we are
working because we also need to work with the standard linear map $h$). Nevertheless, it is easy to check directly that this definition uniquely characterizes $V \otimes W$ (if it exists)
up to unique isomorphism.

Having introduced universal properties, we can look at a related idea: adjoint functors.

*Mantra 2.1.* The best, succinct way to think of a functor $F : \mathcal{D} \rightarrow \mathcal{C}$ adjoint to functor $G : \mathcal{C} \rightarrow \mathcal{D}$ is that $F$ is the most efficient way to systematically
"solve the problem" posed by $G$. If $G$ is, for example, a forgetful functor which throws away some of the structure of category $\mathcal{C}$, is there a method which reconstructs an element of
$\mathcal{C}$ from $\mathcal{D}$, and imposes the
minimal amount of extra structure possible? If such a method exists, and is functorial, in the sense that it works the same for any object, then it can be described via a functor $F : \mathcal{D} \rightarrow \mathcal{C}$
which is adjoint to $G$.

*Mantra 2.2.* Another way to internalize this same intuition is via universal properties. When
we find an object which satisfies a universal property, we are effectively finding the "most efficient" object which satisfies some desired property. An adjoint functor is a technique to define such universal
objects at a global, categorical level, rather than locally. To be more specific, writing down a universal morphism is dependent on a /particular choice/ of object $X$ relative to which we define a comma category.
One way to interpret the utility of an adjoint functor is that it "chooses every $X$ at once" in a functorial manner. In the previous tensor algebra example, we are choosing a particular $X = V$, and defining $T(V)$
via a universal property. In fact, $T$ should be a functor in its own right, and it should work for /every/ choice of $V$ is a functorial manner. Indeed, it is the case that $T$ is a functor adjoint to $\text{For}$.

*Definition 2.4* (Adjoint functor). A functor $F : \mathcal{D} \rightarrow \mathcal{C}$ is said to be /left-adjoint/ if for each $X \in \text{Obj}(\mathcal{C})$, there exists a universal morphism
in $(F \downarrow X)$. The existence of a universal morphism simply means that there is some $(G(X), f_X : F(G(X)) \rightarrow X)$ such that for any other $(C, g : F(C) \rightarrow X)$, there is a
unique morphism $h : C \rightarrow G(X)$ where $f_X \circ F(h) = g$. From here, it is possible to show that we can define a functor $G : \mathcal{C} \rightarrow \mathcal{D}$ such that $f_X \circ F(G(h)) = h \circ f_{X'}$ for all $h : X' \rightarrow X$, as one might
expect/hope. In particular, we simply let $G$ take object $X$ to $G(X)$. Additionally, given arrow $h : X' \rightarrow X$ in $\mathcal{C}$, we obtain objects $(G(X), f_X : F(G(X)) \rightarrow X)$
and $(G(X'), h \circ f_{X'} : F(G(X')) \rightarrow X)$. We then obtain unique morphism $G(h) : G(X') \rightarrow G(X)$ where $f_X \circ F(G(h)) = h \circ f_{X'}$, as desired. To prove that this
mapping of objects/arrows in a valid functor, we simply note that $G$ takes identity arrows to identity arrows and preserves compositions due to uniqueness of $G(h)$.

There is a similar, dual construction, where we say that $G : \mathcal{C} \rightarrow \mathcal{D}$ is /right-adjoint/ if for each $X \in \text{Obj}(\mathcal{D})$, there exists a universal morphism
in $(X \downarrow G)$. We define functor $F : \mathcal{D} \rightarrow \mathcal{C}$ analogously.

*Claim 2.1.* If $F : \mathcal{D} \rightarrow \mathcal{C}$ is left-adjoint, and $G : \mathcal{C} \rightarrow \mathcal{D}$ is the corresponding induced functor, then $G$ is right-adjoint,
and the corresponding induced functor is $F$. Similarly, if $G : \mathcal{C} \rightarrow \mathcal{D}$ is right-adjoint and $F$ is the induced functor, then $F$ is left-adjoint, and its
induced functor is $G$.

/Proof./ Let's look at the first case. We need to show that for each $X$ in $\mathcal{D}$, then there is initial object $(F(X), f_X : X \rightarrow G(F(X)))$
in the comma category. Thus, we need to produce a unique arrow $g : F(X) \rightarrow Y$ for some $(Y, h : X \rightarrow G(Y))$
such that $G(g) \circ f_X = h$. Of course, we know that $F$ is left-adjoint with induced functor $G$, so we can find universal morphism in $(F \downarrow Y)$. This will be
some terminal $(G(Y), g_Y : F(G(Y)) \rightarrow Y)$. So, given $(Z, p : F(Z) \rightarrow Y)$, we have unique $p' : Z \rightarrow G(Y)$ such that $g_Y \circ F(p') = p$.
In particular, we can set $Y = F(X)$ and $Z = X$ with $p = \text{id}$, to get $p' : X \rightarrow G(F(X))$ where $g_{F(X)} \circ F(p') = \text{id}$. In addition, recall
that $g_Y$ satisfies the naturality condition:

\begin{equation}
g_Y \circ (F \circ G)(p) = p \circ g_{Y'}
\end{equation}

for every $p : Y' \rightarrow Y$. We claim that we can set $f_X = p'$. Then, given $(Y, h : X \rightarrow G(Y))$, consider $g_Y \circ F(h)$: we claim that this is the $g$ we need.
Then we have arrow $G(g) \circ f_X = G(g_Y) \circ G(F(h)) \circ p'$, and applying $F$ gives us $(F \circ G)(g_Y) \circ (F \circ G)(F(h)) \circ F(p')$.
From the naturality condition,

\begin{equation}
g_Y \circ F(h) \circ g_{F(X)} = g_Y \circ g_{(F \circ G)(Y)} \circ (F \circ G)(F(h)) = g_Y \circ (F \circ G)(g_Y) \circ (F \circ G)(F(h))
\end{equation}

where the final equality comes from the naturality condition for $p = g_Y$. It follows that

\begin{equation}
g_Y \circ F(G(g_Y \circ F(h)) \circ p') = g_Y \circ (F \circ G)(g_Y) \circ (F \circ G)(F(h)) \circ F(p') = g_Y \circ F(h) \circ g_{F(X)} \circ F(p') = g_Y \circ F(h)
\end{equation}

and by uniqueness, $h = G(g_Y \circ F(h)) \circ p'$, or in other words, $G(g) \circ f_X = h$, as desired. Thus, $G$ is right-adjoint with induced functor $F$. Proving the second case
is follows more or less the same process, so we will omit the proof. $\blacksquare$

*Example 2.3* (Tensor algebra, again). The forgetful functor $\text{For} : \textbf{Alg}_k \rightarrow \textbf{Vect}_k$ of Example 2.2 is right-adjoint (if the tensor algebra $T(V)$ exists). In particular, we have
initial $(T(V), f : V \rightarrow \text{For}(T(V)))$ for each $V \in \text{Obj}(\textbf{Vect}_k)$, which is a universal morphism in $(V \downarrow \text{For})$.

--------------

Now, let us discuss the notion of limits and colimits, which will prove to be useful in our discussion of Abelian categories. Similar to universal morphisms and adjoints, we can think
of limits and colimits as particular initial/terminal objects in a category.

*Definition* (Diagram). A $\mathcal{D}$ -shaped diagram in $\mathcal{C}$ is a functor $F : \mathcal{D} \rightarrow \mathcal{C}$.
We can form a category of $\mathcal{D}$ -shaped diagrams in $\mathcal{C}$, $\mathcal{D}[\mathcal{C}]$, by taking these functors are objects, and natural transformations as arrows.

*Definition* (Cone). If $F : \mathcal{D} \rightarrow \mathcal{C}$ is a $\mathcal{D}$ -shaped diagram in $\mathcal{C}$, and $Y$ is an object in $\mathcal{C}$, we define a cone from $Y$ to $F$ to be a collection of morphisms
$\psi_X : Y \rightarrow F(X)$  for each object $X$ in $\mathcal{C}$, such that the following diagrams commute:

#+ATTR_HTML: :width 250px
[[./assets/cone.png]]

for each arrow $f : X \rightarrow X'$. Similarly, we define a cone from $F$ to $Y$ (also called a co-cone) by reversing all arrows in the above diagram. One can also formulate cones in terms of an appropriate comma category,
if they wish. The category of cones to $F$ takes cones from some object to $F$ as objects, and as morphisms, arrows $g : Y' \rightarrow Y$ in $\mathcal{C}$ making the following diagrams commute:

#+ATTR_HTML: :width 250px
[[./assets/cone_morphism.png]]

with the category of co-cones (or cones from $F$) being defined by again reversing the arrows in the above diagram. Checking that these are categories is easy.

*Definition.* If $F : \mathcal{D} \rightarrow \mathcal{C}$ is a diagram, a limit $\lim F$ is an initial object in the category of cones going to $F$.
Similarly, a colimit $\text{colim} \ F$ is a final object in the category of cones going from $F$. For a more detailed explanation of
limits and colimits, and how they are categorical generalizations of inverse limits and direct limits, see [[./groupoid_svk.html][my previous blog post]]

Using limits and colimits, we are able to define an /equalizer/ within a category, which can be thought of as a categorical generalization of "the set of arguments where
two functions agree".

*Definition.* Let $\mathcal{C}$ be a category, let $X$ and $Y$ be objects, and let $f, g : X \rightarrow Y$ be arrows. Taking $X$ and $Y$ as objects, $f$, $g$, and the identity arrows as morphisms,
we form a subcategory, and if we let $\mathcal{D} = \{1, 2\}$ with arrows $a$ and $b$ pointing from $1$ to $2$ (along with identity arrows), we easily can form a diagram $F : \mathcal{D} \rightarrow \mathcal{C}$ sending
$a$ to $f$ and $b$ to $g$. The equalizer $\text{Eq}(f, g)$ is $\lim F$. Unpacking this definition, the equalizer is an object $C \in \mathcal{C}$ and maps
$\psi_X : C \rightarrow X$ and $\psi_Y : C \rightarrow Y$ such that $g \circ \psi_X = \psi_Y = f \circ \psi_x$ which satisfy the required universal property. Similarly,
the coequalizer $\text{Coeq}(f, g)$ is $\text{colim} \ F$.

*Remark.* One can immediately see how this generalizes the notion of "the set on which two functions are equal". Being sloppy and abusing notation, we can have $C = \{(x, y) \ | \ y = f(x) = g(x)\}$,
$\psi_X$ the projection onto the first argument, and $\psi_Y$ projection onto the second: then $C$ satisfies the desired criterion. Ignore this remark if you find it too hand-wavy.

To conclude, let us briefly introduce the notion of products and coproducts, which are another crucial component of Abelian categories.

*Definition.* Let $\mathcal{C}$ and $\mathcal{D}$ be categories, where $\mathcal{D}$ is an "index set" (i.e. it has no non-identity morphisms), and consists of set of objects $I$. Suppose
$F : \mathcal{D} \rightarrow \mathcal{C}$ is a diagram, which simply amounts to choosing some indexed family $(X_i)_{i \in I}$ of objects $X_i$ in $\mathcal{C}$. Then a product of the $X_i$
is a limit of $F$. Unrolling this definition, it is object $C$ in $\mathcal{C}$, along with morphisms $\pi_i : C \rightarrow X_i$ (projections) which is initial in the cone category.
Similarly, a coproduct is a colimit of $F$.

* Abelian categories

Here, we will develop some central results revolving around /Abelian categories/, which were introduced by Grothendieck in his Tohoku paper, and provide the
arena in which it makes sense to talk about exact sequences, homology, and cohomology is a general, categorical sense.

We need to begin with a lot of definitions (basically a collection of categorical generalizations of things which come up frequently in algebra).

*Definition 3.1* (Preadditive category). A preadditive category $C$ is a category such that each hom-set has the structure of an Abelian group, with composition being bilinear over the group addition:
\begin{align}
    f \circ (g + h) = (f \circ g) + (f \circ h) \ \ \ \ \text{and} \ \ \ \ (g + h) \circ f = (g \circ f) + (h \circ f).
\end{align}

*Definition 3.2* (Zero morphisms). Let $\mathcal{C}$ be a category, an arrow $f : X \rightarrow Y$ is said to be /constant/ if for any morphisms $g, h : W \rightarrow X$, we have $f \circ g = f \circ h$.
An arrow is said to be /coconstant/ if for any morphisms $g, h : Y \rightarrow Z$, we have $g \circ f = h \circ f$. A morphism which is both constant and coconstant is called a /zero morphism/. We say that $C$ is a category
/with zero morphisms/ such that for every two objects $X$ and $Y$, there is a morphism $0_{XY} : X \rightarrow Y$ such that for any two arrows $f : X \rightarrow Y$ and $g : Y \rightarrow Z$, the following diagrams commute:

#+ATTR_HTML: :width 250px
[[./assets/zeros.png]]

*Remark 3.1.* Note that if $\mathcal{C}$ is a category with zero morphisms, then the arrows $0_{XY}$ are unique. To see this, let $Z = Y$, let $g = \text{id}$, let $f = 0_{XY}'$: some other morphism
satisfying the same criteria as $0_{XY}$. Then applying the diagram, we find that $0_{XY} = 0_{YY} \circ 0_{XY}'$ and $0_{XY}' = 0_{YY} \circ 0_{XY}'$, so $0_{XY} = 0_{XY}'$. We can also check
that all of the $0_{XY}$ are zero morphisms. We have $0_{XY} = 0_{YZ} \circ f$ for any arrow $f : X \rightarrow Y$ and we have $g \circ 0_{XY} = 0_{XZ}$ for any arrow $g : Y \rightarrow Z$: this immediately gives us what we want.

*Claim 3.1.* If $\mathcal{C}$ is an object with zero object $\textbf{0}$, then $\mathcal{C}$ has zero morphisms. In particular, we have natural maps $t_X : X \rightarrow \textbf{0}$ and $i_Y : \textbf{0} \rightarrow Y$,
and $0_{XY} = i_Y \circ t_X$ endow $\mathcal{C}$ with the structure of a category with zero morphisms.

/Proof./ Let $f : X \rightarrow Y$ and $g : Y \rightarrow Z$ be arrows. We note that $0_{YZ} \circ f = i_Z \circ (t_Y \circ f)$ and $g \circ 0_{XY} = (g \circ i_Y) \circ t_X$. Of course,
$t_Y \circ f : X \rightarrow \textbf{0}$ must be equal to $t_X$ and $g \circ i_Y$ must be $i_Z$, so both compositions are equal to $0_{XZ}$, as desired. $\blacksquare$

*Remark 3.2.* One can easily see that in a preaddditive category $\mathcal{C}$, the zero objects in each hom-set give $\mathcal{C}$ the structure of a category with zero morphisms. In particular, if we have
$g : Y \rightarrow Z$ and $0_{XY} : X \rightarrow Y$ the zero object in $\text{Hom}(X, Y)$, then

\begin{equation}
g \circ 0_{XY} = g \circ (0_{XY} + 0_{XY}) = g \circ 0_{XY} + g \circ 0_{XY}
\end{equation}

which implies that $g \circ 0_{XY} = 0_{XZ}$. Similarly, $0_{YZ} \circ f = 0_{XZ}$ for some $f : X \rightarrow Y$. Thus, the required commutative diagram is satisfied.

Using the concept of zero morphisms, and the previously introduced concept of equalizers (and coequalizers), we are able to write down a natural definition of the kernel (and cokernel).
Note that kernels and cokernels will not always exist in a given category (as a given category may not contain certain equalizers/coequalizers).

*Definition 3.3* (Kernels and cokernels). Given arrow $f : X \rightarrow Y$ in category $\mathcal{C}$ with zero morphisms, $\text{Ker}(f) = \text{Eq}(f, 0_{XY})$, the equilizer of
$f$ and $0_{XY}$. In addition, $\text{Coker}(f) = \text{Coeq}(f, 0_{XY})$, the coequalizer of $f$ and $0_{XY}$. Note that these are not in general unique, rather unique up to unique isomorphism
(so technically, we should speak of /a/ kernel and /a/ cokernel).

*Definition 3.4* (Image). Using the concept of kernels/cokernels, we are able to define the /image/ of an arrow $f : X \rightarrow Y$ as well. In particular, if cokernel $\text{Coker}(f)$ exists, then
we have object $Q$ and "quotient" morphism $q : Y \rightarrow Q$. Intuitively, if $Q$ is supposed to generalize $Y/\text{Im}(f)$ in the case that we are operating in, say, the category of vector spaces,
then we should have $\text{Ker}(q) \simeq \text{Im}(f)$ (this is just the first isomorphism theorem). Thus, we /define/ $\text{Im}(f) = \text{Ker}(q)$. Again, the image is not unique, but unique
up to unique isomorphism (so we should say, /an/ image).

*Definition 3.5* (Biproducts). Let $\mathcal{C}$ be a category with zero morphisms. Let $X_1, \dots, X_n$ be a collection of objects in $\mathcal{C}$, a biproduct of
these objects is an object $X_1 \oplus \cdots \oplus X_n$ and morphisms $p_k : X_1 \oplus \cdots \oplus X_n \rightarrow X_k$ (projections) and $i_k : X_k \rightarrow X_1 \oplus \cdots \oplus X_n$ (embeddings) which satisfy:
  
- $p_k \circ i_k = 1_k$, the identity arrow on $X_k$
- $p_{\ell} \circ i_k = 0_{k \ell}$, the zero morphism from $X_k$ to $X_{\ell}$.
  
In addition, we require that $(X_1 \oplus \cdots \oplus X_n, p_k)$ is a product of the objects $X_k$ and that $(X_1 \oplus \cdots \oplus X_n, i_k)$ is a coproduct.

*Definition 3.6.* A morphism $f : X \rightarrow Y$ is said to be a monomorphism if $f \circ g = f \circ h$ implies $g = h$ for any arrows $g$ and $h$.
A morphism is said to be an epimorphism if $g \circ f = h \circ f$ implies $g = h$ for any $g$ and $h$. A monomorphism is said to be /normal/
if it is a kernel of some morphism. An epimorphism is said to be /conormal/ if it is a cokernel of some morphism.

*Definition* (Arrow category). Given categroy $\mathcal{C}$, the arrow category $\text{Arr}(\mathcal{C})$ is the category with objects consisting of arrows from $\mathcal{C}$, and
arrows "commutative squares" between two arrows.

We can now (finally) define Abelian categories:

*Definition 3.7* (Abelian category). An Abelian category $\mathcal{C}$ is a preadditive category which satisfies the following criteria:

- $\mathcal{C}$ has a zero object.
- $\mathcal{C}$ contains all binary biproducts (i.e. biproducts of two objects, thus biproducts of a finite number of objects).
- $\mathcal{C}$ contains all kernels and cokernels. In addition, we have functors $\text{Ker}, \text{Coker} : \text{Arr}(\mathcal{C}) \rightarrow \text{Arr}(\mathcal{C})$ such that:
  - $\text{Ker}(f)$ is a kernel $i_f : K_f \rightarrow X$ for $f : X \rightarrow Y$, and $\text{Ker}(\phi)$, for some commutative square $\phi$ of arrows $f : X_f \rightarrow Y_f$ and $g : X_g \rightarrow Y_g$,
    so that $\phi_1 \circ f = g \circ \phi_0$, is defined as follows. Note that the arrow $\phi_0 \circ i_f : K_f \rightarrow X_g$ satisfies
    \begin{equation}
    g \circ \phi_0 \circ i_f = \phi_1 \circ f \circ i_f = 0
    \end{equation}
    which means that we have unique $\widetilde{\phi} : K_f \rightarrow K_g$ making the appropriate kernel diagram commute. We then let $\text{Ker}(\phi)_0 = \widetilde{\phi}$ and $\text{Ker}(\phi)_1 = \phi_0$. We note that
    $i_g \circ \widetilde{\phi} = \phi_0 \circ i_f$, so this is a valid commutative square. It is easy to see that $\text{Ker}(\text{id}) = \text{id}$ and by uniqueness, that
    $\text{Ker}(\phi \circ \psi) = \text{Ker}(\phi) \circ \text{Ker}(\psi)$. Thus, $\text{Ker}$, as we have defined it, is a valid functor from the arrow category to itself.
  - $\text{Coker}(f)$ is a cokernel $q_f : X \rightarrow Q_f$ for $f : X \rightarrow Y$, and $\text{Coker}(\phi)$ is defined similar to the case of the kernel, using the universal property satisfied by cokernels.
- Every monomorphism in $\mathcal{C}$ is normal, every epimorphism is conormal.

Operating in the realm of Abelian categories allows us to prove many, generic results, some of which are recognizable from basic algebra. It is worthwhile to note that we have somewhat "extended" the definition
of Abelian categories, by introducing /specific functors/ which yield "chosen" kernels and cokernels. I decided to do this because it appears to be the best way to avoid invoking some kind of "axiom of choice
for classes" and other set-theoretic oddities. Thus, going forward, whenever we say "the kernel" or "the cokernel", we are referring to the kernel/cokernel yielded by these functors.

*Remark.* Note that in Abelian category $\mathcal{C}$, our kernel and cokernel functors induce an image functor $\text{Im} : \text{Arr}(\mathcal{C}) \rightarrow \text{Arr}(\mathcal{C})$.
As we saw earlier, the image is a kernel of a cokernel, so we can simply compose the functors $\text{Ker}$ and $\text{Coker}$.

*Definition 3.8.* If $\mathcal{C}$ is an Abelian category, a sequence of morphisms indexed by integers $\cdots \rightarrow X^{j - 1} \rightarrow X^j \rightarrow X^{j + 1} \rightarrow \cdots$
is said to be a cochain complex if the composition of neighbouring arrows is the unique zero morphism between the objects. A chain complex is exactly the dualized version of the chain
complex that we would expect.

*Definition 3.9* (Cohomology and homology). We will focus here on the case of cohomology, rather than homology, as for our purposes, it is more important.
Let $\mathcal{C}$ be an Abelian category, consider a cochain complex

#+ATTR_HTML: :width 350px
[[./assets/cochain.png]]

which we denote by $X^{\bullet}$, where we have $d^{j + 1} \circ d^j : X^j \rightarrow X^{j + 2}$ equal to the zero morphism from $X^j$ to $X^{j + 2}$.
Of course, the data of $\text{Ker}(d^j)$ is an object $K^j$ and a map $i^j : K^j \rightarrow X^j$ (and inclusion arrow). We then define $u^j$ via the universal property which $i^j$ and $K^j$ satisfy:

#+ATTR_HTML: :width 250px
[[./assets/universal_co.png]]

One should think of this arrow as restricting the target of $d^{j - 1}$ to the kernel $K^j$, as due to the fact that $d^j \circ d^{j - 1}$ is the zero morphism, it makes sense
to do this. From here, we take $H^j(X^{\bullet}) = \text{Coker}(u^j)$: this is a $j$ -th cohomology of $X^{\bullet}$. Informally, one can think of this as "the kernel of $d^j$
modulo the image of $d^{j - 1}$", which is the standard definition of cohomology when working with Abelian groups.

In addition, if we have a collection of morphisms between terms of
cochain complexes $X^{\bullet}$ and $Y^{\bullet}$, $f^j : X^j \rightarrow Y^j$,

#+ATTR_HTML: :width 400px
[[./assets/co_morphism.png]]

such that each of the squares in the above diagram commute, then we are able to define $H^{j}(f^{\bullet}) : H^j(X^{\bullet}) \rightarrow H^{j}(Y^{\bullet})$ as follows.
We first define map from $K_X^j$ to $Q_Y^j$, where $Q_Y^j$ is the object of $H^j(Y^{\bullet})$. Of course, we have $f^j : X^j \rightarrow Y^j$, and we have inclusion $i^j_X : K_X^j \rightarrow X^j$,
so we have arrow $f^j \circ i^j_X$. We then obtain unique map $\widetilde{f} : K_X^j \rightarrow K_Y^j$ given by

#+ATTR_HTML: :width 250px
[[./assets/uni_2.png]]

where we are using the fact that

\begin{equation}
d_Y^j \circ f^j \circ i_X^j = f^{j + 1} \circ d_X^{j + 1} \circ i_X^j = 0
\end{equation}

From here, we can post-compose with the quotient $q_Y^j : K_Y^j \rightarrow Q_Y^j$ to get the desired map from $K_X^j$ to $H^j(Y^{\bullet})$. To finally promote this to a map from $Q_X^j$: the object of $H^j(X^{\bullet})$, we need
to show that $\widetilde{f} \circ u_X^j = u_Y^j \circ f^{j - 1}$. This follows immediately from the fact that each of these maps fits into the following defining diagram for the kernel:

#+ATTR_HTML: :width 300px
[[./assets/uni_3.png]]

as we have

\begin{equation}
i_Y^j \circ \widetilde{f} \circ u_X^j = f^j \circ i_X^j \circ u_X^j = f^j \circ d^{j - 1}_X
\end{equation}

and

\begin{equation}
i_Y^j \circ u_Y^j \circ f^{j - 1} = d_Y^{j - 1} \circ f^{j - 1} = f^j \circ d^{j - 1}_X
\end{equation}

We know that the map in the diagram is unique, so these arrows must be equal. We then have the following, final diagram for the cokernel

#+ATTR_HTML: :width 300px
[[./assets/uni_4.png]]

where we use the fact that

\begin{equation}
q_Y^j \circ \widetilde{f} \circ u_X^j = q_Y^j \circ u_Y^j \circ f^{j - 1} = 0
\end{equation}

It follows that the dashed arrow is uniquely defined: this is precisely the map $H^j(f^{\bullet})$. With that, we are finally done describing the cohomology of a cochain complex
within an Abelian category, and the associated morphisms.

*Claim.* If $f$ and $g$ are morphisms of cochain complexes, then

\begin{equation}
H^j((f \circ g)^{\bullet}) = H^j(f^{\bullet}) \circ H^j(g^{\bullet})
\end{equation}

for morphisms $f^{\bullet}$ and $g^{\bullet}$ of cochain complexes.

/Proof./ First, note that if $h = f \circ g$, then $\widetilde{h} = \widetilde{f} \circ \widetilde{g}$, as both of these maps satisfy a diagram of the form of the one above Eq. (7), and such a map is unique. From here,
both of these induced maps will fit into a diagram of the form of the one above Eq. (10), and we again use uniqueness to come to our desired conclusion. $\blacksquare$

--------------

*Lemma 3.1.* If $\mathcal{C}$ is an Abelian category, with arrows $f : X \rightarrow Y$ and $g : Y \rightarrow Z$ such that $\text{Im}(f) \simeq \text{Ker}(g)$, then $\text{Im}(g) \simeq \text{Coker}(f)$.

/Proof./ This amounts to showing that $\text{Coker}(f) \simeq \text{Coker}(i_g)$, where $i_g : \text{Ker}(g) \rightarrow Y$ is the defining map of $\text{Ker}(g)$.
We know that $\text{Im}(f) \simeq \text{Ker}(g)$, so we let $q_f : Y \rightarrow \text{Coker}(f)$ be the defining map for $\text{Coker}(f)$, and then let $i_{q_f} : \text{Ker}(q_f) \rightarrow X$
be the defining map for $\text{Ker}(q_f)$. Let $\Phi : \text{Ker}(q_f) \rightarrow \text{Ker}(g)$ be an isomorphism (which we know exists). We define maps $\phi$ and $\psi$ via the universal properties of kernels of cokernels:

#+ATTR_HTML: :width 400px
[[./assets/first_com.png]]

In particular, $\phi$ and $\psi$ are the unique arrows making the following diagrams commute:

#+ATTR_HTML: :width 500px
[[./assets/com_2.png]]

Note that

\begin{align}
   q_{i_g} \circ f = q_{i_g} \circ i_{q_f} \circ \phi = q_{i_g} \circ i_g \circ \Phi \circ \phi = 0
\end{align}

and

\begin{align}
    q_{f} \circ i_g = q_f \circ i_{q_f} \circ \Phi^{-1} = 0
\end{align}

We can then fill in the dashed lines by again exploiting universal properties:

#+ATTR_HTML: :width 500px
[[./assets/com_3.png]]

and it follows by uniqueness of $\mu$ and $\nu$ that they must be inverse of each other, thus definining an isomorphism of $\text{Coker}(f)$ and $\text{Coker}(i_g) = \text{Im}(g)$, as desired. $\blacksquare$

*Definition 3.10.* We say that the sequence of morphisms in Abelian category $\mathcal{C}$,

#+ATTR_HTML: :width 350px
[[./assets/short_exact.png]]

is short exact if $f$ is a monomorphism, $g$ is an epimorphism, and $\text{Im}(f) \simeq \text{Ker}(g)$.

*Lemma 3.2* (Splitting lemma). Consider a short exact sequence in Abelian category $\mathcal{C}$ of the above form. Then the following statements are equivalent:

- There exists a morphism $t : Y \rightarrow X$ such that $t \circ f = 1_X$, the identity on $X$.
- There exists a morphism $u : Z \rightarrow Y$ such that $g \circ u = 1_Z$, the identity on $Z$.
- There is an isomorphism $h : Y \rightarrow X \oplus Z$, where $X \oplus Z$ is a biproduct of $X$ and $Z$ where $h \circ f = i_X$ and $g \circ h^{-1} = p_Z$.

For the sake of moving on to more interesting things in a reasonable timeframe, I will omit this (I assume very standard) proof for now.

* Derived functors

Now that we've cleared up the preliminaries, let us dive into the theory of derived functors. We will follow some nice [[https://www.math.toronto.edu/%7Ejacobt/Lecture12.pdf][lecture notes]] prepared by Jacob Tsimerman for a course on etale cohomology, filling in details.
Let:

#+ATTR_HTML: :width 350px
[[./assets/short_exact.png]]

be a short exact sequence in Abelian category $\mathcal{C}$. We then say that an additive functor between Abelian categories $F : \mathcal{C} \rightarrow \mathcal{D}$ ($F$ is a group homomorphism
from $\text{Hom}(X, Y)$ to $\text{Hom}(F(X), F(Y))$) is /exact/ if, for any short exact sequence of the above form, then

#+ATTR_HTML: :width 350px
[[./assets/F_short_exact.png]]

is also a short exact sequence. It is called left-exact (right-exact) under the weaker condition that we no longer require $F(g)$ ($F(f)$) to be an epimorphism (monomorphism).

*Remark 4.1.* Note that $F : \mathcal{C} \rightarrow \mathcal{C}'$ being left-exact is equivalent to it preserving finite limits. To be more precise, if $G : \mathcal{D} \rightarrow \mathcal{C}$ is a diagram, where the
set of objects and morphisms of $\mathcal{D}$ are finite sets, then $F$ being left-exact is equivalent to $F(\lim G)$ (for some limit $\lim G$ of $G$) being isomorphic to \lim F \circ G$, some limit of $F \circ G$.

*Corollary 4.1.* If $F$ is a left-exact functor between Abelian categories, then $F$ applied to the kernel of arrow $f : A \rightarrow B$ is isomorphic to the kernel of $F(f) : F(A) \rightarrow F(B)$.

/Proof./ Note that the kernel is an equalizer $\text{Eq}(f, 0_{AB})$, which is a finite limit of the diagram consisting of $A$ and $B$ with arrows $f$ and $0_{AB}$. Since $F$ is left-exact, this is the
same as the limit of the diagram consisting of $F(A)$ and $F(B)$ with arrows $F(f)$ and $F(0_{AB}) = 0_{F(A) F(B)}$ (from additivity of $F$).
Therefore, our limit is indeed some equalizer $\text{Eq}(F(f), 0_{F(A) F(B)})$, which is isomorphic to /the/ kernel $\text{Ker} F(f)$, as desired. $\blacksquare$

*Corollary 4.2.* A left-exact functor preserves zero objects in an Abelian category.

/Proof./ The kernel of a zero morphism is always the zero object, so a kernel of the zero morphism $0$ from some zero object $\textbf{0}$ to itself is $\textbf{0} \in \mathcal{C}$, so $F(\textbf{0})$
is equal to a kernel of the zero morphism $F(0)$ from $F(\textbf{0})$ to itself, which is a zero object $\textbf{0} \in \mathcal{D}$. $\blacksquare$

Let $K$ be the kernel of $f$, let $i : K \rightarrow A$ be the inclusion, so that $f \circ i = 0_{KB}$. We have the short exact sequence $0 \to K \to A \to Q \to 0$ where $Q$
is the cokernel of $f$. Thus, $0 \to F(K) \to F(A) \to F(Q)$ is exact, so in particular, $F(i)$ is a monomorphism and the image of $F(K) \to F(A)$ is isomorphic to the kernel of $F(A) \to F(Q)$.
The main idea of a derived functor is to take a left-exact functor $F$, and product a new family of functors ($R^i F$ for $i \geq 0$, where  $R^0 F = F$) which fit into a long exact sequence. This sequence can be thought of as
a "higher-order artifact" which quantifies the failure of a left-exact functor to be exact, which is a stronger condition.

Suppose we /did/ have such functors $R^i F$:

\begin{equation}
    0 \to F(X) \to F(Y) \to F(Z) \to R^1 F(X) \to R^1 F(Y) \to R^1 F(Z) \to R^2 F(X) \to \cdots
\end{equation}

Let us try to deduce some necessary properties.

*Definition 4.1.* If $\mathcal{C}$ is a category, we say that object $I \in \mathcal{C}$ is injective if for every monomorphism $f : X \rightarrow Y$
and morphism $g : X \rightarrow I$, there exists morphism $h : Y \rightarrow I$ extending $g$ (i.e. $h \circ f = g$).
We say that $\mathcal{C}$ has /enough injectives/ if for every object $X$ in $\mathcal{C}$, there is a monomorphism $X \rightarrow I$ from $X$ into some injective object.

Suppose $I$ is injective in Abelian category $\mathcal{C}$ and suppose we have short exact sequence $0 \to I \to X \to Y \to 0$ (with arrows $f$ and $g$). The fact that $I$ is injective means that
there must be $h$ such that $h \circ f = \text{id}_I$, so $f$ has a left-inverse, which means (via the splitting lemma) that $X \simeq I \oplus Y$ (the biproduct of $I$ and $Y$) via the arrow $k$:

#+ATTR_HTML: :width 450px
[[./assets/splitting_lemma.png]]

We want to show that $F(g)$ is an epimorphism. We have the inclusion and projection to and from the biproduct, $Y \to I \oplus Y \to Y$, which compose to give the identity.
It follows that $F(p \circ j) = F(p) \circ F(j) = \text{id}$, so $F(p)$ has a right-inverse, which automatically implies it is an epimorphism. Hence, $F(g)$ is as well, as $F(k)$ is an isomorphism.
Therefore, the left-exact functor actually takes the short exact sequence to a true, exact sequence. This means that we can extend the short exact sequence to a long exact sequence trivially: we just keep adding zeros.
This extension isn't unique, we could have any sequence which looks like:

\begin{equation}
    0 \to F(I) \to F(X) \to F(Y) \to 0 \to R^1 F(X) \simeq R^1 F(Y) \to 0 \to R^2 F(X) \simeq R^2 F(Y) \to 0 \to \cdots
\end{equation}

and we would still have exactness. However, in any of these cases, we have $R^i F(I) = 0$ for $i \geq 1$ when $I$ is an injective object. This suggests to us that, perhaps, our functors $R^i F$ should kill all injective
objects when $i \geq 1$. As it turns out, this intuition is correct, and will guide us towards the definition of $R^i F$.

Suppose we are working in Abelian category $\mathcal{C}$ which has enough injectives. Given some object $X$, let us pick some monomorphism $f : X \rightarrow I$. We then note that $Y = \text{Coker}(f)$ is in $\mathcal{C}$,
so we have short exact sequence $0 \to X \to I \to Y \to 0$. This follows from the fact that the quotient $q : I \to Y$ is an epimorphism, and $\text{Im}(f) = \text{Ker}(q)$ by definition.

From here, assume that we have $R^i F(I) = 0$ for $i \geq 1$. The associated long exact sequence (if it exists) will look like

\begin{equation}
    0 \to F(X) \to F(I) \to F(Y) \to R^1 F(X) \to 0 \to R^1 F(Y) \to R^2 F(X) \to 0 \to \cdots
\end{equation}

which means that $R^1 F(X)$ is the image of $F(Y) \to R^1 F(X)$, which is isomorphic to the cokernel of $F(I) \to F(Y)$ (this is from Lemma 3.1). In addition, we have $R^{i - 1} F(Y) \simeq R^i F(X)$ for $i \geq 2$. This
comes from the fact that

\begin{equation}
R^i F(X) \simeq \text{Ker}(R^i F(X) \rightarrow 0) \simeq \text{Im}(R^{i - 1} F(Y) \rightarrow R^i F(X)) \simeq \text{Coker}(0 \rightarrow R^{i - 1} F(Y)) \simeq R^{i - 1} F(Y)
\end{equation}

where we are again using Lemma 3.1, and the first and last isomorphisms are easy to check.

This means that we should
be able to compute $R^2 F(X)$, for example, by embedding $Y$ in an injective $J$, $g : Y \rightarrow J$, and then computing $R^1 F(Y)$ by computing the cokernel of $F(J) \to F(Z)$, where $Z = \text{Coker}(g)$. We can repeat
this procedure recursively to get all higher $R^i F(X)$. Of course, to do this, we need the guarantee that we can actually embed into injective objects in the first place:
this is precisely the condition of our category having "enough injectives", which we introduced earlier. It is also unclear at this point that the $R^i F(X)$
will be independent of the injective embeddings chosen: we will soon show that this is the case.

*Definition 4.2.* Given object $X$, and injective resolution of $X$ is an exact sequence $0 \to X \to I^0 \to I^1 \to \cdots$ where each $I^n$ is injective.

*Lemma 4.1.* In an Abelian category, injective resolutions always exist.
 
/Proof./ The way we do this is as follows. Start with $X$, pick injective embedding $X \to I^0$ using the "enough injectives" property. From here, note that cokernel of this map exists:
call it $K^0$. We can then pick an injective embedding $K^0 \to I^1$. We continue on like this, inductively, and our sequence ends up looking like:

   \begin{equation}
   \label{eq:res}
       0 \to X \to I^0 \to K^0 \to I^1 \to K^1 \to I^2 \to K^2 \to \cdots
   \end{equation}

    This gives a collection of short exact sequences, $0 \to K^{j} \to I^{j + 1} \to K^{j + 1} \to 0$ (where we let $K^{-1} = X$), and our corresponding injective resolution is formed by taking the $I^k$,

   \begin{equation}
   0 \to X \to I^0 \to I^1 \to I^2 \to \cdots
   \end{equation}

   To verify that this sequence is exact, note that $\text{Im}(I^{k - 1} \to I^k)$ is isomorphic to $K^{k - 1}$, which is isomorphic to $\text{Ker}(I^k \to I^{k + 1})$ (this isn't difficult to verify). $\blacksquare$

Again, assuming that right derived functors $R^i F$ exist, and satisfy the previous properties. By taking one of the short
exact sequences $0 \to K^j \to I^{j + 1} \to K^{j + 1} \to 0$ produced in the above proof, we can look at the long exact sequence associated to mapping under $R^i F$. In particular, as we discussed before,

\begin{equation}
    R^{i - 1} F(K^{j + 1}) \simeq R^i F(K^j)
\end{equation}

which gives us the sequence of isomorphisms

\begin{equation}
    R^n F(X) = R^{n} F(K^{-1}) \simeq R^{n - 1} F(K^0) \simeq R^{n - 2} F(K^1) \simeq \cdots \simeq R^{1} F(K^{n - 2})
\end{equation}

We already saw that $R^{1} F(K^{n - 2})$ is the cokernel of the map $F(I^{n - 1}) \to F(K^{n - 1})$. However, from the above proof of the lemma, $K^{n - 1} \simeq \text{Ker}(I^n \to I^{n + 1})$, and
since $F$ is left exact, $F(K^{n - 1}) \simeq \text{Ker}(F(I^n) \to F(I^{n+1}))$ (Corollary 4.1). Thus, $R^n F(X)$ should be isomorphic to the $n$ -th cohomology of the complex $F(X) \to F(I^0) \to F(I^1) \to F(I^2) \to \cdots$.
In particular, since the injective resolution is exact, it follows that neighbouring arrows compose to zero, and thus $F$ applied to these arrows compose to zero, so this is a valid cochain complex in our Abelian
category.

*Definition 4.3* (Right-derived functors). If $F$ is a left-exact functor between Abelian categories, the right-derived functors $R^n F(X)$ are defined to be the cohomology groups of the cochain
complex $F(I^0) \to F(I^1) \to F(I^2) \to \cdots$ for some injective resolution $0 \to X \to I^0 \to I^1 \to I^2 \to \cdots$.

Of course, we still need to prove that this definition makes sense, independent of the injective resolution.

*Remark 4.2.* Note that if $X^{\bullet}$ and $Y^{\bullet}$ are cochain complexes, and we have arrows $h^j : X^j \rightarrow Y^{j - 1}$, then $f^j = d_Y^{j - 1} \circ h^{j} + h^{j + 1} \circ d_X^j$
going from $X^j$ to $Y^j$ is a morphism of complexes, as

\begin{equation}
d_Y^j \circ f^j = d_Y^j \circ d_Y^{j - 1} \circ h^{j} + d_Y^j \circ h^{j + 1} \circ d_X^j = (d_Y^j \circ h^{j + 1} + h^{j + 2} \circ d_X^{j + 1}) \circ d_X^j = f^{j + 1} \circ d_X^j
\end{equation}

Moreover, it is easy to check that $H^{\bullet}(f^{\bullet}) = 0$ (the unique morphism of cochain complexes which consists of zero arrows in each degree).
We say that maps of complexes $g$ and $g'$ are /cochain homotopy equivalent/ if $g - g'$ is a map of the form of $f$ above, for
some $h$.

*Lemma 4.2.* Given objects $X$ and $Y$, and injective resolutions $X \to I$ and $Y \to J$, along with morphism $\bar{f} : X \to Y$, there exists a morphism of cochain complexes $f : I \rightarrow J$
which induces $\bar{f}$ in the zeroth degree of cohomology, and any two such lifts are cochain homotopy equivalent.

/Proof./ We can compose the map $\bar{f} : A \rightarrow B$ with the monomorphism of $B$ into $J^0$ to get a map $A \to J^0$. Of course, $X \to I^0$ is a monomorphism, and since $J^0$
is injective, we can extend to morphism $I^0 \to J^0$. This is the base case, we will proceed by induction. Suppose we have $f^j : I^j \to J^j$ such that $d_J^j \circ f^j = f^{j + 1} \circ d_I^j$
for $j < n$. It then follows that

\begin{equation}
(d_J^n \circ f^n)(\text{Ker}(I^n \to I^{n+1})) = (d_J^n \circ f^n \circ d_I^{n - 1})(I^{n - 1}) = (d_J^n \circ d_J^{n-1} \circ f^{n - 1})(I^{n-1}) = 0
\end{equation}

where I'm making the assumption that images (as we have defined them) behave well relative to composition (they do). It follows immediately that $d_J^n \circ f^n$ induces a unique map
on the cokernel of the map which includes the kernel of $I^n \to I^{n + 1}$ in $I^n$, which from Lemma 3.1, is isomorphic to the image of $I^n \to I^{n + 1}$. So we have a map $\widetilde{f} : d_I^n(I^n) \to J^{n + 1}$.
Of course, this image is equipped with a monomorphism into $I^{n + 1}$, so using injectivity of $J^{n + 1}$, we extend to a map $f^{n + 1} : I^{n + 1} \to J^{n + 1}$. One can verify by re-tracing
definitions that $d_J^n \circ f^n = f^{n + 1} \circ d_I^n$. As an illuminating example, note that if we were simply working with Abelian groups, this could be verified by noting that for some object $g \in I^{n + 1}$,

\begin{equation}
(f^{n + 1} \circ d_I^n)(g) = \widetilde{f}(d_I^n(g)) = (d_J^n \circ f^n)(g)
\end{equation}

The general proof just involves unrolling a bunch of definitions. So by induction, the result follows.

Given two lifts $f_1$ and $f_2$, note that $f_1 - f_2$ induces the zero morphism in the zeroth degree of cohomology, so we just need to show that a lift of the zero morphism is of the form of
$d_J^{j - 1} \circ h^{j} + h^{j + 1} \circ d_I^j$ (a cochain homotopy), which induces the zero map in cohomology. Again, we proceed via induction. If we assume that $f$ is a lift of the zero map,
so that $f^0$ kills $A$, then via the same logic as before, we induce a map $d_I^0(I^0) \to J^0$ which lifts to $h^1 : I^1 \to J^0$ by injectivity. Again, we suppose that $h^j$ is defined so
$f^j = d_J^{j - 1} \circ h^{j} + h^{j + 1} \circ d_I^j$ for $j < n$. Then,

\begin{align}
(f^n - d_J^{n - 1} \circ h^n)(\text{Ker}(I^n \to I^{n+1})) = ((f^n - d_J^{n - 1} \circ h^n) \circ d_I^{n - 1})(I^{n-1}) = 0
\end{align}

so that $f^n - d_J^{n - 1} \circ h^n$ induces a map on $d_I^n(I^n)$, which can be extended to a map from $I^{n+1}$ to $J^{n+1}$. We define this to be $h^{n+1}$, and can verify that this map satisfies the
necessary condition for a cochain homotopy. So again, by induction, the result follows. $\blacksquare$

*Remark 4.3.* This proof was slightly hand-wavy: working very carefully with Abelian categories is somewhat subtle, but it is often clear exactly why we can take certain steps (and gloss over their justification)
via our intuition from working with Abelian groups.

*Theorem 4.1.* If $X \to I$ and $X \to J$ are two injective resolutions of $X$, then $H^{\bullet}(F(I)) \simeq H^{\bullet}(F(J))$ (via unique isomorphism), so that the
right-derived functors $R^n F(X)$ are well-defined.

/Proof./ We use the previous lemma to lift the identity map on $X$, which is a morphism of cochain complexes (injective resolutions), call this $f$. Then $F(f)$ is still a morphism
of cochain complexes $F(I)$ and $F(J)$. If $f - f' = d_J \circ h - h \circ d_I$, then

\begin{equation}
F(f) - F(f') = F(f - f') = F(d_J) \circ F(h) - F(h) \circ F(d_I) = d_{F(J)} \circ F(h) - F(h) \circ d_{F(I)}
\end{equation}

so $F(f)$ and $F(f')$ are cochain homotopic, which means that when we descend to cohomology, $H^{\bullet}(F(f)) = H^{\bullet}(F(f'))$. We can also lift the identity to a map
going in the other direction, $J \to I$ (call this map $g$). Note that $g \circ f$ is just the identity on complex $I$, which induces the identity on cohomology. Similarly, $f \circ g$
induces the identity on cohomology. Since $H^{\bullet}(F(f \circ g)) = H^{\bullet}(F(f)) \circ H^{\bullet}(F(g))$ and $H^{\bullet}(F(g \circ f)) = H^{\bullet}(F(g)) \circ H^{\bullet}(F(f))$,
it follows that we do, in fact, have a unique isomorphism in cohomology.

-----------

To conclude this section, we will discuss acyclic resolutions, which are an easier way to compute right-derived functors (as finding an injective resolution can often be difficult).

*Definition 4.3.* If $F : \mathcal{C} \rightarrow \mathcal{D}$ is left-exact between Abelian categories, object $X$ in $\mathcal{C}$ is acyclic if $R^jF(X) = 0$ for $j \geq 1$.

*Theorem 4.2.* If $0 \to X \to J^0 \to J^1 \to \cdots$ is an exact sequence such that all of the $J^k$ are acyclic objects, then $R^j F(X)$ is naturally isomorphic to the $j$ -th cohomology
of $0 \to F(J^0) \to F(J^1) \to \cdots$.

/Proof./ We have short exact sequences $0 \to X \to J^0 \to K^0 \to 0$ where $K^0 = \text{Coker}(X \to J^0)$ and $0 \to K^i \to J^i \to K^{i+1} \to 0$ for $i \geq 1$, with
$K^i = \text{Ker}(J^i \to J^{i + 1}) \simeq \text{Im}(J^{i-1} \to J^i)$, so the natural map $J^i \to K^{i+1}$ is an epimorphism. We can write down corresponding long exact sequences via the
right derived functors $R^i F$, and via the exact same procedure as in Definition 4.1, we find that $R^j F(X)$ is the $j$ -th cohomology of $0 \to F(J)$. $\blacksquare$

* Triangulated categories and derived categories

In the previous section, we introduced "right-derived functors" of a particular left-exact functor between Abelian categories $F : \mathcal{C} \rightarrow \mathcal{D}$. Even though
we referred to these objects as "functors", they were really just a sequence of objects $R^i F(X)$ for a given $X$. As it turns out, we can actually think of $R^i F(\cdot)$ as true
functors, via introducing a new category. This will be the natural arena in which we will define hypercohomology in the next section.

We begin by introducing the localization of a category. Intuitively, if $\mathcal{C}$ is a category, a localization of $\mathcal{C}$ is a new category in which some of the arrows of $\mathcal{C}$ are forced to be isomorphisms.

*Definition 5.1* (Localization of a category). If $\mathcal{C}$ is a category, a localization of $\mathcal{C}$ on a class of arrows $W \subset \text{Mor}(\mathcal{C})$ is a category
$\mathcal{C}[W^{-1}]$ and a functor $L : \mathcal{C} \rightarrow \mathcal{C}[W^{-1}]$ such
that if $F : \mathcal{C} \rightarrow \mathcal{D}$ is another functor which takes element of $W$ to isomorphisms in $\mathcal{D}$, then there is a unique (up to natural isomorphism) functor $G$ such that

#+ATTR_HTML: :width 250px
[[./assets/local.png]]

commutes on arrows and objects. One can see that any two localizations will be isomorphic as categories, via a unique isomorphism.

*Definition 5.2.* If $\mathcal{C}$ is an Abelian category, we define $\text{Kom}(\mathcal{C})$ to be the category of cochain complexes in $\mathcal{C}$, with arrows being morphisms of cochain complexes.
We call an arrow in $\text{Kom}(\mathcal{C})$ (which, as we know, induces maps in cohomology) a /quasi-isomorphism/ if these induced maps are isomorphisms in $\mathcal{C}$.

*Definition 5.3* (Derived category). Given Abelian category $\mathcal{C}$, a derived category $\mathcal{D}(\mathcal{C})$ is a localization of $\text{Kom}(\mathcal{C})$ on the set of quasi-isomorphisms (i.e. we are forcing
quasi-isomorphisms to be legitimate isomorphisms of cochain complexes).

*Remark 5.1.* Proving that derived categories actually exist is quite subtle, because localizations, in general, do not always exist. However, as we will now show, they do exist when the class $W$ satisfies
particular properties.

We will follow the treatment of this subject outlined in Chapter 10 of Weibel's book.

*Definition 5.1.* 

* Sheaf cohomology and hypercohomology
